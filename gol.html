<!DOCTYPE html>
<html>
<body>

<canvas id="myCanvas" width="400" height="200" style="border:1px solid #000000; position: absolute; left: 50%; margin-right: -50%; transform: translate(-50%, 50%)">Your browser is not supported.</canvas>

<script>
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");
var pSize = 5;
var pixels = [];
var now = "s1";
var then = "s2";

//  Seed data
var p1 = {x: 13, y: 12, s1: "black", s2: "white"};
pixels.push(p1);
var p2 = {x: 13, y: 13, s1: "black", s2: "white"};
pixels.push(p2);
var p3 = {x: 12, y: 12, s1: "black", s2: "white"};
pixels.push(p3);
var p4 = {x: 13, y: 11, s1: "black", s2: "white"};
pixels.push(p4);
var p5 = {x: 14, y: 11, s1: "black", s2: "white"};
pixels.push(p5);

function updateCanvas() {

    var numPixels = pixels.length;
    for (var p = 0; p < numPixels; p++) {
        ctx.fillStyle = pixels[p][now];
        ctx.fillRect(
            pixels[p].x * pSize,
            pixels[p].y * pSize,
            pSize,
            pSize);
    }
}

function countNeighbors(atX, atY) {
    var count = 0;
    var numPixels = pixels.length;
    for (var p = 0; p < numPixels; p++) {
        if (Math.abs(pixels[p].x - atX) == 1 || Math.abs(pixels[p].y - atY) == 1) {
            count += 1;
        }
    }
    console.log(count);
    return count;
}

function liveOrDie(currentMortalStatus, neighbors) {
    var aliveOrDead = "live";
    if (currentMortalStatus == "alive") {
        if (neighbors < 2) {
            aliveOrDead = "die";
        } else if (neighbors > 3) {
            aliveOrDead = "die";
        } else {
            aliveOrDead = "live";
        }
    } else if (currentMortalStatus == "dead") {
        if (neighbors == 3) {
            aliveOrDead = "live";
        } else {
            aliveOrDead = "die";
        }
    }
    return aliveOrDead;
}

function gameRules() {
    var numPixels = pixels.length;
    for (var p = 0; p < numPixels; p++) {
        var neighbors = countNeighbors(pixels[p].x, pixels[p].y);
        
        var currentMortalStatus = "dead";
        if (pixels[p][then] == "black") {
            currentMortalStatus = "alive";
        }
        var live = liveOrDie(currentMortalStatus, neighbors);
        
        if (live == "live") {
            pixels[p][now] = "black";
        } else {
            pixels[p][now] = "white";
        }
    }
}

function updatePixelsDict() {
    var _then = now;
    now = then;
    then = _then;

    gameRules();
    
}

function cycleOfLife() {
    updateCanvas();
    updatePixelsDict();
}

var varOn = setInterval(cycleOfLife, 1110);


</script>

</body>
</html>

